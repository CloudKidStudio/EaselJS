/*
* EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{};
(function(){var c=function(b,a,e,f){this.initialize(b,a,e,f)},a=c.prototype=new createjs.Container;c.INDEPENDENT="independent";c.SINGLE_FRAME="single";c.SYNCHED="synched";a.startPosition=0;a.loop=!0;a.currentFrame=0;a.timeline=null;a.paused=!1;a.actionsEnabled=!0;a.autoReset=!0;a._framerateIndependent=!1;a._animationFrameRate=0;a._elapsedTime=0;a._animDuration=0;a._synchOffset=0;a._prevPos=-1;a._prevPosition=0;a.Container_initialize=a.initialize;a.initialize=function(b,a,e,f){this.mode=b||c.INDEPENDENT;
this.startPosition=a||0;this.loop=e;props={paused:!0,position:a,useTicks:!0};this.Container_initialize();this.timeline=new createjs.Timeline(null,f,props);this._managed={}};a.isVisible=function(){return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY))};a.Container_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return!0;this._updateTimeline();this.Container_draw(b,a)};a.enableFramerateIndependence=function(b){!this.mode!=c.INDEPENDENT&&(this._animationFrameRate=b,
this._framerateIndependent=!0,this._elapsedTime=0,this._duration=this.timeline.duration/b)};a.disableFramerateIndependence=function(){this._animationFrameRate=0;this._framerateIndependent=!1};a.play=function(){this.paused=!1};a.stop=function(){this.paused=!0};a.gotoAndPlay=function(b){this.paused=!1;this._goto(b)};a.gotoAndStop=function(b){this.paused=!0;this._goto(b)};a.clone=function(){throw"MovieClip cannot be cloned.";};a.toString=function(){return"[MovieClip (name="+this.name+")]"};a.Container__tick=
a._tick;a._tick=function(b){!this.paused&&this.mode==c.INDEPENDENT&&(this._framerateIndependent?(this._elapsedTime+=0.0010*b[0],this._elapsedTime>this._duration&&(this._elapsedTime=this.timeline.loop?this._elapsedTime-this._duration:this._duration),this._prevPosition=Math.floor(this._elapsedTime*this._animationFrameRate)):this._prevPosition=0>this._prevPos?0:this._prevPosition+1);this.Container__tick(b)};a._goto=function(b){b=this.timeline.resolve(b);null!=b&&(-1==this._prevPos&&(this._prevPos=NaN),
this._prevPosition=b,this._framerateIndependent&&(this._elapsedTime=this._prevPosition/this._animationFrameRate),this._updateTimeline())};a._reset=function(){this._prevPos=-1;this.currentFrame=0};a._updateTimeline=function(){var b=this.timeline,a=b._tweens,e=this.children,f=this.mode!=c.INDEPENDENT;b.loop=null==this.loop?!0:this.loop;f?b.setPosition(this.startPosition+(this.mode==c.SINGLE_FRAME?0:this._synchOffset),createjs.Tween.NONE):b.setPosition(0>this._prevPos?0:this._prevPosition,this.actionsEnabled?
null:createjs.Tween.NONE);this._prevPosition=b._prevPosition;if(this._prevPos!=b._prevPos){this.currentFrame=this._prevPos=b._prevPos;for(var d in this._managed)this._managed[d]=1;for(b=a.length-1;0<=b;b--)d=a[b],f=d._target,f!=this&&(d=d._stepPosition,f instanceof createjs.DisplayObject?this._addManagedChild(f,d):this._setState(f.state,d));for(b=e.length-1;0<=b;b--)a=e[b].id,1==this._managed[a]&&(this.removeChildAt(b),delete this._managed[a])}};a._setState=function(b,a){if(b)for(var e=0,f=b.length;e<
f;e++){var d=b[e],c=d.t,d=d.p,g;for(g in d)c[g]=d[g];this._addManagedChild(c,a)}};a._addManagedChild=function(b,a){b._off||(this.addChild(b),b instanceof c&&(b._synchOffset=a,b.mode==c.INDEPENDENT&&(b.autoReset&&!this._managed[b.id])&&b._reset()),this._managed[b.id]=2)};createjs.MovieClip=c;var g=function(){throw"MovieClipPlugin cannot be instantiated.";};g.priority=100;g.install=function(){createjs.Tween.installPlugin(g,["startPosition"])};g.init=function(a,c,e){return e};g.step=function(){};g.tween=
function(a,g,e,f,d,h){return!(a.target instanceof c)?e:1==h?d[g]:f[g]};g.install()})();
